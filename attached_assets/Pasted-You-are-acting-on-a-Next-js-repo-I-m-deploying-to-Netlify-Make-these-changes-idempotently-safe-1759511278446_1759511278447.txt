You are acting on a Next.js repo I’m deploying to Netlify. Make these changes **idempotently** (safe to re-run). Do NOT alter app logic, styles, routes, or environment values beyond what’s described.

1) Detect package manager:
   - If `pnpm-lock.yaml` exists, use pnpm. Else if `yarn.lock` exists, use yarn. Else default to npm. Below, substitute the correct tool automatically.

2) Node version:
   - Create/update `.nvmrc` with `20`.
   - Add env hint for Netlify by ensuring `NODE_VERSION=20` in the Netlify build environment later (note in README).

3) Netlify adapter for SSR:
   - Add dev dependency `@netlify/next`.
   - Create/update `netlify.toml` at repo root with EXACT content:

     [build]
     command = "pnpm install --frozen-lockfile && pnpm build"
     publish = ".next"

     [build.environment]
     NODE_VERSION = "20"

     [[plugins]]
     package = "@netlify/next"

   - If not using pnpm, replace the command with the right tool:
     * yarn:  "yarn install --frozen-lockfile && yarn build"
     * npm:   "npm ci && npm run build"

4) package.json scripts (add if missing; do not remove extras):
   - "build": "next build"
   - "dev": "next dev"
   - "start": "next start"
   - Also add an OPTIONAL static export path:
     - "build:export": "next build && next export"  (outputs to `out/`)

5) Next config:
   - If `next.config.js` or `next.config.mjs` is missing, create a minimal one:
     // next.config.js
     /** @type {import('next').NextConfig} */
     const nextConfig = {
       reactStrictMode: true
     };
     module.exports = nextConfig;
   - Do NOT force `output: 'export'` globally; static export is optional via the script above.

6) SPA/CSR redirects (nice to have):
   - Create a `_redirects` file in project root with:
     /*  /index.html  200
   - Also copy this `_redirects` into `public/_redirects` if `public/` exists (Netlify picks from publish dir; adapter or export will include it).

7) README deploy notes (append or create README.md section “Deploying to Netlify”):
   - For SSR (recommended): Connect the repo in Netlify → set Build command and Publish dir to match `netlify.toml`. Add required env vars in Netlify (NEXT_PUBLIC_*, API keys, DB URLs). Ensure `NODE_VERSION=20`.
   - For pure static: run `build:export` locally or in CI and deploy the `out/` folder (drag & drop). Keep `_redirects`.
   - Commit and push.

8) Lint & verify:
   - Run the chosen package manager’s install.
   - Run `build` to confirm it compiles.
   - If build fails due to missing env vars, inject **temporary** safe defaults only for local build (e.g., NEXT_PUBLIC_APP_NAME="Lendgismo") via `.env.local` and DO NOT commit `.env.local`. Do not invent keys for auth/DB; just note them in README if missing.

9) Output:
   - Print a short summary of what changed, the detected package manager, and the exact commands Netlify should use:
     Build command and Publish directory.
   - Do not modify UI files, routes, or styling.

Proceed now.
